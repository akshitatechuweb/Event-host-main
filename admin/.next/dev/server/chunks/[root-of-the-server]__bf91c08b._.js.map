{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 166, "column": 0}, "map": {"version":3,"sources":["file:///D:/Event-host-main/backend/models/HostRequest.js"],"sourcesContent":["// models/HostRequest.js\r\nimport mongoose from \"mongoose\";\r\n\r\nconst eventHostRequestSchema = new mongoose.Schema(\r\n  {\r\n    userId: {\r\n      type: mongoose.Schema.Types.ObjectId,\r\n      ref: \"User\",\r\n      required: true,\r\n      index: true,\r\n    },\r\n\r\n    preferredPartyDate: {\r\n      type: Date,\r\n      required: true,\r\n    },\r\n\r\n    locality: {\r\n      type: String,\r\n      required: true,\r\n      trim: true,\r\n    },\r\n\r\n    city: {\r\n      type: String,\r\n      required: true,\r\n      trim: true,\r\n    },\r\n\r\n    pincode: {\r\n      type: String,\r\n      required: true,\r\n      trim: true,\r\n    },\r\n\r\n    status: {\r\n      type: String,\r\n      enum: [\"pending\", \"approved\", \"rejected\"],\r\n      default: \"pending\",\r\n    },\r\n\r\n    rejectionReason: {\r\n      type: String,\r\n    },\r\n  },\r\n  { timestamps: true }\r\n);\r\n\r\n// Only ONE pending request per user\r\neventHostRequestSchema.index(\r\n  { userId: 1, status: \"pending\" },\r\n  {\r\n    unique: true,\r\n    partialFilterExpression: { status: \"pending\" },\r\n  }\r\n);\r\n\r\nexport default mongoose.model(\"EventHostRequest\", eventHostRequestSchema);\r\n"],"names":[],"mappings":"AAAA,wBAAwB;;;;;AACxB;;AAEA,MAAM,yBAAyB,IAAI,yJAAQ,CAAC,MAAM,CAChD;IACE,QAAQ;QACN,MAAM,yJAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,QAAQ;QACpC,KAAK;QACL,UAAU;QACV,OAAO;IACT;IAEA,oBAAoB;QAClB,MAAM;QACN,UAAU;IACZ;IAEA,UAAU;QACR,MAAM;QACN,UAAU;QACV,MAAM;IACR;IAEA,MAAM;QACJ,MAAM;QACN,UAAU;QACV,MAAM;IACR;IAEA,SAAS;QACP,MAAM;QACN,UAAU;QACV,MAAM;IACR;IAEA,QAAQ;QACN,MAAM;QACN,MAAM;YAAC;YAAW;YAAY;SAAW;QACzC,SAAS;IACX;IAEA,iBAAiB;QACf,MAAM;IACR;AACF,GACA;IAAE,YAAY;AAAK;AAGrB,oCAAoC;AACpC,uBAAuB,KAAK,CAC1B;IAAE,QAAQ;IAAG,QAAQ;AAAU,GAC/B;IACE,QAAQ;IACR,yBAAyB;QAAE,QAAQ;IAAU;AAC/C;uCAGa,yJAAQ,CAAC,KAAK,CAAC,oBAAoB"}},
    {"offset": {"line": 229, "column": 0}, "map": {"version":3,"sources":["file:///D:/Event-host-main/frontend/app/api/host-requests/route.ts"],"sourcesContent":["// app/api/host-requests/route.ts\r\n\r\nimport { NextResponse } from \"next/server\";\r\nimport HostRequest from \"../../../../backend/models/HostRequest.js\";\r\n\r\n\r\nexport async function GET() {\r\n  try {\r\n    const requests = await HostRequest.find({})\r\n      .populate(\"userId\", \"name phone username email\")\r\n      .sort({ createdAt: -1 })\r\n      .lean();\r\n\r\n    const formattedRequests = requests.map((req: any) => ({\r\n      id: req._id.toString(),\r\n      userName: req.userId?.name || req.userId?.username || req.userId?.email || \"Unknown User\",\r\n      phone: req.userId?.phone || \"N/A\",\r\n      city: req.city,\r\n      preferredPartyDate: req.preferredPartyDate.toISOString().split(\"T\")[0],\r\n      status: req.status,\r\n    }));\r\n\r\n    return NextResponse.json({\r\n      success: true,\r\n      data: formattedRequests,\r\n    });\r\n  } catch (error: any) {\r\n    console.error(\"Host requests API error:\", error);\r\n    return NextResponse.json(\r\n      { success: false, message: \"Failed to fetch requests\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}"],"names":[],"mappings":"AAAA,iCAAiC;;;;;AAEjC;AACA;;;AAGO,eAAe;IACpB,IAAI;QACF,MAAM,WAAW,MAAM,6IAAW,CAAC,IAAI,CAAC,CAAC,GACtC,QAAQ,CAAC,UAAU,6BACnB,IAAI,CAAC;YAAE,WAAW,CAAC;QAAE,GACrB,IAAI;QAEP,MAAM,oBAAoB,SAAS,GAAG,CAAC,CAAC,MAAa,CAAC;gBACpD,IAAI,IAAI,GAAG,CAAC,QAAQ;gBACpB,UAAU,IAAI,MAAM,EAAE,QAAQ,IAAI,MAAM,EAAE,YAAY,IAAI,MAAM,EAAE,SAAS;gBAC3E,OAAO,IAAI,MAAM,EAAE,SAAS;gBAC5B,MAAM,IAAI,IAAI;gBACd,oBAAoB,IAAI,kBAAkB,CAAC,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;gBACtE,QAAQ,IAAI,MAAM;YACpB,CAAC;QAED,OAAO,4JAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,MAAM;QACR;IACF,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,4BAA4B;QAC1C,OAAO,4JAAY,CAAC,IAAI,CACtB;YAAE,SAAS;YAAO,SAAS;QAA2B,GACtD;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}